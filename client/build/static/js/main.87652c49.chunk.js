(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{154:function(e,t,a){e.exports=a.p+"static/media/hero.58529113.jpg"},156:function(e,t,a){e.exports=a(293)},161:function(e,t,a){},256:function(e,t){},293:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(33),s=a.n(l),i=a(9),c=(a(161),a(10)),o=a(11),m=a(13),u=a(12),d=a(8),p=a(4),h=a.n(p),g=a(18),E=Object(n.createContext)(),f=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:{availability:[]}},e.setUser=function(t){e.setState({user:t})},e.updateUser=function(t){h.a.put("/api/user/"+e.state.user._id+"/profile",Object(g.a)(Object(g.a)({},e.state.user),t)).then((function(t){return e.setUser(t.data)})).catch((function(e){return console.log(e)}))},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(E.Provider,{value:Object(g.a)(Object(g.a)({},this.state),{},{setUser:this.setUser,updateUser:this.updateUser})},this.props.children)}}]),a}(n.Component),b=a(17),v=function(e,t,a,n,r,l,s){return h.a.post("/api/auth/signup",{username:e,password:t,email:a,birthDate:n,location:r,role:l,category:s}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},y=function(e,t){return h.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))};function N(){var e=Object(n.useContext)(E).user,t=Object(d.f)(),a=t.pathname,l=t.search,s="/login"===a,c="/signup"===a&&"?artist=true"!==l,o="?artist=true"===l;return r.a.createElement("nav",null,r.a.createElement("div",{id:"nav-left-container"},r.a.createElement("div",{id:"nav-inner-l"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{src:"https://res.cloudinary.com/artistree/image/upload/v1589980960/Images/ARTISTREELOGO_afkwqa.png",id:"logo",alt:"logo"}))),r.a.createElement("div",{id:"nav-right-container"},r.a.createElement("div",{id:"nav-inner-r"},r.a.createElement("div",{className:"link"},r.a.createElement(i.b,{to:"/"},"Home")),e?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"link"},r.a.createElement(i.b,{to:"/user/".concat(e._id)},"Profile")),r.a.createElement("div",{className:"link"},r.a.createElement(i.b,{to:"/logout"},"Logout"))):r.a.createElement(r.a.Fragment,null,!o&&r.a.createElement("div",{className:"link"},r.a.createElement(i.b,{to:"/signup?artist=true"},"Create artist profile")),!s&&r.a.createElement("div",{className:"link"},r.a.createElement(i.b,{to:"/login"},"Login")),!c&&r.a.createElement("div",{className:"link"},r.a.createElement(i.b,{to:"/signup",className:"btn btn-primary","data-toggle":"modal","data-target":"#exampleModal"},"Signup")))))))}var O=a(182),w=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",email:"",birthDate:"",location:"",message:"",categories:[],category:"Visual Artist"},e.componentDidMount=function(){h.a.get("/api/categories").then((function(t){e.setState({categories:t.data})}))},e.isArtist=function(){var t=O.parse(e.props.location.search);return Boolean(t.artist)},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(b.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password,l=a.email,s=a.birthDate,i=a.location,c=a.category;v(n,r,l,s,i,e.isArtist()?"Artist":"Client",c).then((function(t){t.message?e.setState({message:t.message,username:"",password:"",email:"",birthDate:"",location:"",role:""}):((0,e.context.setUser)(t),e.props.history.push("/login"))}))},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("main",{className:"main-box"},r.a.createElement("div",{className:"form-popup",id:"myForm"},r.a.createElement("form",{className:"form-signup",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"con"},r.a.createElement("header",{className:"head-form"},r.a.createElement("h2",null,"Signup"),r.a.createElement("p",null,"Sign up here to use our services.")),r.a.createElement("br",null),r.a.createElement("div",{className:"field-set"},r.a.createElement("label",null,"Username: "),r.a.createElement("input",{type:"text",name:"username",placeholder:"picasso",value:this.state.username,onChange:this.handleChange,id:"txt-input",className:"form-input"}),r.a.createElement("br",null),r.a.createElement("label",null,"Password: "),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:this.handleChange,id:"txt-input",className:"form-input"}),r.a.createElement("br",null),r.a.createElement("label",null,"Email: "),r.a.createElement("input",{type:"text",name:"email",placeholder:"picasso@mail.com",value:this.state.email,onChange:this.handleChange,id:"txt-input",className:"form-input"}),r.a.createElement("br",null),r.a.createElement("label",null,"Birthday: "),r.a.createElement("input",{type:"date",name:"birthDate",value:this.state.birthDate,onChange:this.handleChange,id:"txt-input",className:"form-input"}),this.isArtist()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("label",null,"Location: "),r.a.createElement("input",{type:"text",name:"location",placeholder:"City",value:this.state.location,onChange:this.handleChange,id:"txt-input",className:"form-input"}),r.a.createElement("br",null),r.a.createElement("label",null,"Type of artist: "),r.a.createElement("select",{name:"category",id:"category",value:this.state.category,onChange:this.handleChange,className:"select-input"},this.state.categories.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),this.state.message&&r.a.createElement("div",{variant:"danger"},this.state.message),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",value:"Signup",className:"signup"},"Signup"),r.a.createElement("br",null))))))}}]),a}(n.Component);w.contextType=E;var k=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",message:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(b.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;y(n,r).then((function(t){if(t.message)e.setState({message:t.message,username:"",password:""});else{var a=t;(0,e.context.setUser)(a),e.props.history.push("Artist"===a.role?"/user/".concat(a._id):"/#search")}}))},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("main",{className:"main-box"},r.a.createElement("div",{className:"form-popup",id:"myForm"},r.a.createElement("form",{className:"form-login",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"con"},r.a.createElement("header",{className:"head-form"},r.a.createElement("h2",null,"Login"),r.a.createElement("p",null,"Already signed up? Login here.")),r.a.createElement("br",null),r.a.createElement("div",{className:"field-set"},r.a.createElement("label",null,"Username: "),r.a.createElement("input",{type:"text",name:"username",placeholder:"picasso",value:this.state.username,onChange:this.handleChange,id:"txt-input",className:"form-input"}),r.a.createElement("br",null),r.a.createElement("label",null,"Password: "),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:this.handleChange,id:"txt-input",className:"form-input"}),this.state.message&&r.a.createElement("div",{variant:"danger"},this.state.message),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",value:"Login",className:"Login"},"Login"),r.a.createElement("br",null))))))}}]),a}(n.Component);k.contextType=E;var j=a(26),C=a(63),x=(a(140),a(141),a(3)),S=a.n(x),D=a(154),F=a.n(D);function A(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)({category:"Visual Artist",location:"",search:""}),c=Object(j.a)(s,2),o=c[0],m=c[1],u=Object(n.useState)({startDate:S()(),endDate:S()().add(7,"d")}),d=Object(j.a)(u,2),p=d[0],E=p.startDate,f=p.endDate,v=d[1],y=Object(n.useState)([]),N=Object(j.a)(y,2),O=N[0],w=N[1],k=Object(n.useState)([]),x=Object(j.a)(k,2),D=x[0],A=x[1],_=Object(n.useState)(null),U=Object(j.a)(_,2),T=U[0],I=U[1];Object(n.useEffect)((function(){var e=h.a.get("/api/categories"),t=h.a.get("/api/locations"),a=h.a.get("/api/results");Promise.all([e,t,a]).then((function(e){var t=Object(j.a)(e,3),a=t[0],n=t[1],r=t[2];w(a.data),A(n.data),l(r.data)}))}),[]);var P=Object(n.useCallback)((function(e){m(Object(g.a)(Object(g.a)({},o),{},Object(b.a)({},e.target.name,e.target.value)))}),[o,m]),L=a.filter((function(e){var t="".concat(e.displayName,"_").concat(e.subcategory).toLowerCase().includes(o.search.toLowerCase().trim()),a=o.category===e.category||!o.category||"Other"===o.category&&t,n=o.location===e.location||!o.location,r=e.availability&&e.availability.some((function(e){var t=S()(e.startDate),a=S()(e.endDate),n=t&&t.isBetween(E,f),r=a&&a.isBetween(E,f),l=E&&E.isBetween(t,a)&&f&&f.isBetween(t,a);return n||r||l}));return a&&n&&r}));return r.a.createElement("main",null,r.a.createElement("div",{className:"hero-container"},r.a.createElement("div",{className:"hero",style:{backgroundImage:"url(".concat(F.a,")")}}),r.a.createElement("div",{className:"hero-filter"},r.a.createElement("h1",null,"ArtisTree")),r.a.createElement("a",{href:"#search",onClick:function(e){e.preventDefault(),window.scrollBy({top:window.innerHeight-window.scrollY,left:0,behavior:"smooth"})}},r.a.createElement("div",{class:"arrow"},r.a.createElement("div",{class:"progress"}),r.a.createElement("i",null)))),r.a.createElement("span",{id:"search"}),r.a.createElement("div",{className:"search-container"},r.a.createElement("h2",null,"Search for Artists"),r.a.createElement("form",{className:"searchForm",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",{className:"select-container"},r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("select",{name:"category",id:"category",onChange:P,value:o.category},O.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),"Other"===o.category&&r.a.createElement("div",{className:"input-container"},r.a.createElement("label",{htmlFor:"subcategory"},"Custom Search"),r.a.createElement("input",{type:"text",name:"search",id:"subcategory",onChange:P,value:o.search})),r.a.createElement("div",{className:"select-container"},r.a.createElement("label",{htmlFor:"location"},"Location"),r.a.createElement("select",{name:"location",id:"location",onChange:P,value:o.location},r.a.createElement("option",{value:""}),D.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement(C.DateRangePicker,{startDate:E,startDateId:"your_unique_start_date_id",endDate:f,endDateId:"your_unique_end_date_id",onDatesChange:function(e){var t=e.startDate,a=e.endDate;v({startDate:t,endDate:a})},focusedInput:T,onFocusChange:function(e){return I(e)}})),r.a.createElement("ul",{className:"filteredArtists"},L.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(i.b,{to:"/user/".concat(e._id)},r.a.createElement("div",{className:"message-profile-pic large",style:{backgroundImage:"url(".concat(e.imageUrl,")")}}),r.a.createElement("span",null,r.a.createElement("p",{className:"name-artist"},e.displayName?e.displayName:e.username),r.a.createElement("p",null,e.category),r.a.createElement("p",null,e.subcategory))))})))))}function _(e){var t=Object(n.useContext)(E).setUser;return Object(n.useEffect)((function(){h.a.delete("/api/auth/logout").then((function(a){t(null),e.history.push("/")}))}),[e.history,t]),null}var U=a(155),T=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={visibility:!1,startDate:null,endDate:null},e.toggleVisibility=function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{visibility:!e.state.visibility}))},e.makeCalEntry=function(){e.context.updateUser(Object(g.a)(Object(g.a)({},e.context.user),{},{availability:[].concat(Object(U.a)(e.context.user.availability?e.context.user.availability:[]),[{startDate:e.state.startDate,endDate:e.state.endDate}])})),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{startDate:null,endDate:null}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return this.state.visibility?r.a.createElement("div",{className:"dates"},r.a.createElement(C.DateRangePicker,{startDate:this.state.startDate,startDateId:"your_unique_start_date_id",endDate:this.state.endDate,endDateId:"your_unique_end_date_id",onDatesChange:function(t){var a=t.startDate,n=t.endDate;return e.setState({startDate:a,endDate:n})},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})}}),r.a.createElement("br",null),r.a.createElement("div",{className:"button-dates"},r.a.createElement("button",{className:"button-forms",onClick:function(){if(e.state.startDate&&e.state.endDate)return e.makeCalEntry()}},"Submit"),r.a.createElement("button",{className:"button-forms",onClick:this.toggleVisibility},"Close"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"button-dates"},this.props.allowedToEdit&&r.a.createElement("button",{className:"button-forms",onClick:this.toggleVisibility},"Add Availability")))}}]),a}(n.Component);T.contextType=E;var I=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.context.user.availability,t=e?e.map((function(e){return r.a.createElement("li",{key:e._id},e.startDate.split("T")[0]," to ",e.endDate.split("T")[0])})):null;return r.a.createElement("div",{className:"avail-div"},r.a.createElement("h1",{className:"avail-text"},"Your Availability:"),r.a.createElement("ul",{id:"Availabilities"},t))}}]),a}(n.Component);I.contextType=E;var P=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={title:"",description:"",images:[],uploadOn:!1},e.handleChange=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(b.a)({},a,n))},e.uploadMultiple=function(t){t.preventDefault();for(var a=new FormData,n=t.target.files,r=0;r<n.length;r++)a.append("files",n[r]);e.setState({uploadOn:!0},(function(){h.a.post("/api/upload/multiple",a,{headers:{crossdomain:!0,"Content-Type":"undefined"}}).then((function(t){var a=t.data.data.map((function(e){return e.url}));e.setState({images:a,uploadOn:!1})})).catch((function(e){return console.log(e)}))}))},e.handleSubmit=function(t){t.preventDefault(),h.a.post("/api/artwork",{title:e.state.title,description:e.state.description,images:e.state.images}).then((function(){e.setState({title:"",description:"",images:[]}),e.props.closeForm(),e.props.getData()})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("main",{className:"mainart-box"},r.a.createElement("div",{className:"form-popup",id:"myForm"},r.a.createElement("form",{className:"form-art",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"con"},r.a.createElement("div",{className:"field-set"},r.a.createElement("header",{className:"form-header"},r.a.createElement("h2",null,"Add Artwork")),r.a.createElement("label",null,"Title: "),r.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:function(t){return e.handleChange(t)},className:"form-input"}),r.a.createElement("label",null,"Description:"),r.a.createElement("input",{type:"text",name:"description",value:this.state.description,onChange:function(t){return e.handleChange(t)},className:"form-input"})),r.a.createElement("label",{className:"submit submit-label",for:"inputfiles"},"Select files"),r.a.createElement("input",{className:"invisible",id:"inputfiles",type:"file",name:"files",multiple:!0,onChange:this.uploadMultiple,style:{display:"none"}}),!this.state.uploadOn&&r.a.createElement("input",{type:"submit",value:"Submit",className:"submit"})))))}}]),a}(n.Component),L=function(e){return r.a.createElement("div",{className:"artbox"},r.a.createElement("h2",{className:"art-title"},"Artwork:"),r.a.createElement("div",{className:"art"},e.artworks.length>0,e.artworks.map((function(t){return r.a.createElement("div",{className:"overlaycontainer",key:t._id},r.a.createElement(i.b,{to:"/user/".concat(e.profileId,"/artwork/").concat(t._id)},r.a.createElement("img",{className:"overlayartwork",src:t.images[0],alt:"",height:"200"}),r.a.createElement("div",{className:"overlayart"},r.a.createElement("h3",{className:"overlaytext"},t.title))))}))))},M=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={imageUrl:null,username:null,displayName:"",bio:"",location:null,role:null,categories:[],category:"",subcategory:"",artworks:[],images:[],error:!1,addArtworkForm:!1,editPicture:!1,uploadOn:!1},e.componentDidMount=function(){e.getData(),h.a.get("/api/categories").then((function(t){e.setState({categories:t.data})}))},e.handleFormChange=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(b.a)({},n,r))},e.handleFileChange=function(t){var a=new FormData;a.append("imageUrl",t.target.files[0]),e.setState({uploadOn:!0},(function(){h.a.post("/api/upload/single",a).then((function(t){e.setState({imageUrl:t.data.secure_url,uploadOn:!1,editPicture:!1})})).catch((function(e){return console.log(e)}))}))},e.handleSubmit=function(t){t.preventDefault();var a=e.context.user,n=a.availability,r=e.state,l=r.displayName,s=r.bio,i=r.location,c=r.category,o=r.subcategory;h.a.put("/api/user/".concat(a._id,"/profile"),{displayName:l,bio:s,location:i,category:c,subcategory:o,availability:n}).then((function(t){var a=t.data,n=a.displayName,r=a.bio,l=a.location,s=a.category,i=a.subcategory,c=a.availability;e.setState({displayName:n,bio:r,location:l,category:s,subcategory:i,availability:c,editProfile:!1})}))},e.getData=function(){var t=e.props.match.params.id;h.a.get("/api/user/".concat(t)).then((function(t){var a=t.data,n=a.displayName,r=a.bio,l=a.location,s=a.category,i=a.subcategory,c=a.availability,o=a.imageUrl,m=a.username,u=a.artworks,d=a.role;e.setState({displayName:n,bio:r,location:l,category:s,subcategory:i,availability:c,imageUrl:o,username:m,artworks:u,role:d})})).catch((function(e){console.log(e)}))},e.toggleEditForm=function(){e.setState({editPicture:!e.state.editPicture})},e.toggleArtwork=function(){e.setState({addArtworkForm:!e.state.addArtworkForm})},e.toggleProfileEdit=function(){e.setState({editProfile:!e.state.editProfile})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;if(this.state.error)return r.a.createElement("div",null,this.state.error.toString());if(!this.state.username)return r.a.createElement(r.a.Fragment,null);var t=this.context.user,a=this.props.match.params.id,n=t._id===a,l="Artist"===t.role,s=this.state.displayName&&this.state.bio&&this.state.location&&this.state.category;return r.a.createElement("main",{className:"page"},r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"profile-banner"},r.a.createElement("i",{className:"fa fa-bars","aria-hidden":"true"})),r.a.createElement("section",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"left col-lg-4"},r.a.createElement("div",{className:"photo-left"},r.a.createElement("img",{className:"photo",style:{height:"200px"},src:this.state.imageUrl,alt:this.state.displayName}),n&&r.a.createElement("label",{className:"overlaybutton"},"Edit Picture",r.a.createElement("input",{hidden:!0,type:"file",onChange:function(t){return e.handleFileChange(t)}}))),r.a.createElement("p",null,this.state.getData),r.a.createElement("h4",{className:"name"},this.state.displayName),r.a.createElement("div",{className:"info-div"},r.a.createElement("p",{className:"info"},this.state.subcategory),r.a.createElement("p",{className:"info"},this.state.category),r.a.createElement("p",{className:"info"},this.state.location)),r.a.createElement("p",{className:"desc"},this.state.bio),r.a.createElement("div",{className:"edit-buttons"},r.a.createElement("span",{className:"button-profile"},r.a.createElement("div",null,r.a.createElement(i.b,{className:"my-messages button-forms",to:n?"/messages":"/messages/".concat(a)},n?"My messages":"Send a message"))),r.a.createElement("span",{className:"button-profile"},r.a.createElement("div",null,n&&r.a.createElement("button",{className:s?"button-edit-profile":"button-complete-profile",type:"button",onClick:this.toggleProfileEdit},s?"Edit Profile":"Complete your profile")))),this.state.editProfile&&r.a.createElement("form",{className:"form-login",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"con"},r.a.createElement("div",{className:"field-set"},r.a.createElement("label",{htmlFor:"displayName"},"Display Name:"),r.a.createElement("input",{className:"form-input",type:"text",name:"displayName",id:"displayName",onChange:this.handleFormChange,value:this.state.displayName}),r.a.createElement("label",{htmlFor:"bio"},"Bio:"),r.a.createElement("textarea",{className:"text-input",type:"text",name:"bio",id:"bio",value:this.state.bio,onChange:this.handleFormChange}),r.a.createElement("label",{htmlFor:"location"},"Location:"),r.a.createElement("input",{className:"form-input",onChange:this.handleFormChange,type:"text",name:"location",id:"location",value:this.state.location}),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"category"},"Artist Type:"),r.a.createElement("select",{className:"select-input",name:"category",id:"category",value:this.state.category,onChange:this.handleFormChange},this.state.categories.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("label",{htmlFor:"subcategory"},"Subcategory:"),r.a.createElement("input",{className:"form-input",type:"text",name:"subcategory",id:"subcategory",value:this.state.subcategory,onChange:this.handleFormChange})),r.a.createElement("button",{className:"submit",type:"submit"},"Update Profile"),r.a.createElement("br",null))))),r.a.createElement("div",{className:"right col-lg-8"},r.a.createElement("div",{className:"row gallery"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(L,{artworks:this.state.artworks,profileId:a,className:"art"}),n&&l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"button-forms",type:"button",onClick:this.toggleArtwork},"Add Artwork")),this.state.addArtworkForm&&r.a.createElement(P,{getData:this.getData,closeForm:function(){e.setState({addArtworkForm:!1})}})))))),"Artist"===t.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{allowedToEdit:n}),r.a.createElement(T,{allowedToEdit:n}))))}}]),a}(n.Component);function B(e){var t=e.message,a=Object(n.useContext)(E).user,l=t.from.username===a.username,s=l?t.to._id:t.from._id,c=t.text.substring(0,10)+"...";return r.a.createElement("li",null,r.a.createElement(i.b,{to:"/messages/".concat(s),className:"message-preview"},r.a.createElement("div",{className:"message-profile-pic",style:{backgroundImage:"url(".concat(l?t.to.imageUrl:t.from.imageUrl,")")}}),r.a.createElement("div",{className:"name-and-message"},r.a.createElement("p",{className:"name-from"},l?t.to.username:t.from.username),r.a.createElement("p",null,l?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"you:")," ",c):c))))}function q(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){h.a.get("/api/messages").then((function(e){l(e.data)}))}),[l]),r.a.createElement("aside",{className:"messages-list"},r.a.createElement("ul",null,a.map((function(e){return r.a.createElement(B,{key:e._id,message:e})}))))}function V(e){var t=e.message,a=e.user,n=t.from.username===a.username;return r.a.createElement("li",{className:n?"message outgoing":"message incoming"},!n&&r.a.createElement(i.b,{to:"/user/".concat(t.from._id)},r.a.createElement("div",{className:"message-profile-pic small",style:{backgroundImage:"url(".concat(t.from.imageUrl,")")}})),r.a.createElement("p",null,t.text))}function R(e){var t=Object(n.useContext)(E).user,a=Object(n.useState)(""),l=Object(j.a)(a,2),s=l[0],i=l[1],c=Object(n.useState)([]),o=Object(j.a)(c,2),m=o[0],u=o[1],d=function(){e.id&&h.a.get("/api/messages/".concat(e.id)).then((function(e){u(e.data)}))};Object(n.useEffect)((function(){d()}),[e.id]);return r.a.createElement("section",{className:"messages-chat"},e.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,m.map((function(e){return r.a.createElement(V,{message:e,user:t})}))),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),h.a.post("/api/messages/".concat(e.id),{message:s}).then((function(e){d(),i("")}))},className:"message-form"},r.a.createElement("div",{class:"message-box-container"},r.a.createElement("label",{htmlFor:"Message",className:"message-label"},"Message"),r.a.createElement("input",{className:"message-input",value:s,onChange:function(e){i(e.target.value)},type:"text",name:"message",id:"Message"})),r.a.createElement("button",{className:"message-send",type:"submit"},"Send"))))}function H(e){var t=e.match.params.id,a=Object(n.useContext)(E).user;return Object(n.useEffect)((function(){a._id===t&&e.history.push("/messages")}),[a._id,t]),r.a.createElement("main",{className:"messages-page container"},r.a.createElement(q,{id:t}),r.a.createElement(R,{id:t}))}M.contextType=E,M.contextType=E;var J=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.props.handleSubmit},r.a.createElement("h2",null,"Edit Artwork "),r.a.createElement("div",{className:"con"},r.a.createElement("div",{className:"field-set"},r.a.createElement("label",{htmlFor:"title"},"Title:"),r.a.createElement("input",{className:"form-input",type:"text",name:"title",id:"title",value:this.props.title,onChange:function(t){return e.props.handleChange(t)}}),r.a.createElement("label",{htmlFor:"description"},"Description:"),r.a.createElement("input",{className:"form-input",type:"text",name:"description",id:"description",value:this.props.description,onChange:function(t){return e.props.handleChange(t)}}),r.a.createElement("input",{className:"submit",type:"submit",value:"Submit",id:"submit"}),r.a.createElement("br",null)))))}}]),a}(n.Component),W=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={artwork:null,title:"",description:"",images:[],editForm:!1,taskForm:!1,error:null},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(b.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.props.match.params.artworkId;h.a.put("/api/artwork/".concat(a),{title:e.state.title,description:e.state.description,images:e.state.images}).then((function(t){e.setState({artwork:t.data,title:t.data.title,description:t.data.description,editForm:!1})})).catch((function(e){console.log(e)}))},e.getData=function(){var t=e.props.match.params.artworkId;h.a.get("/api/artwork/".concat(t)).then((function(t){e.setState({artwork:t.data,title:t.data.title,description:t.data.description,images:t.data.images})})).catch((function(t){404===t.response.status&&e.setState({error:"Not found"})}))},e.deleteArtwork=function(){var t=e.props.match.params.artworkId,a=e.context.user;h.a.delete("/api/artwork/".concat(t)).then((function(){e.props.history.push("/user/".concat(a._id))})).catch((function(e){console.log(e)}))},e.toggleEditForm=function(){e.setState({editForm:!e.state.editForm})},e.toggleTaskForm=function(){e.setState({taskForm:!e.state.taskForm})},e.componentDidMount=function(){e.getData()},e}return Object(o.a)(a,[{key:"render",value:function(){if(this.state.error)return r.a.createElement("div",null,this.state.error);if(!this.state.artwork)return r.a.createElement(r.a.Fragment,null);var e=this.props.match.params.id,t=this.context.user;return r.a.createElement("main",{className:"artwork-page"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"name"},this.state.artwork.title),r.a.createElement("div",{className:"art-img"},this.state.images.map((function(e){return r.a.createElement("img",{className:"artworks",src:e,alt:""})}))),r.a.createElement("p",{className:"info"},this.state.artwork.description),r.a.createElement("div",{className:"edit-buttons"},t._id===e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"buttons",onClick:this.toggleEditForm},"Edit this Artwork"),r.a.createElement("button",{className:"buttons",onClick:this.deleteArtwork},"Delete this Artwork"))),this.state.editForm&&r.a.createElement(J,Object.assign({},this.state,{handleChange:this.handleChange,handleSubmit:this.handleSubmit}))))}}]),a}(n.Component);W.contextType=E;var Y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("/api/auth/loggedin").then((function(t){(0,e.context.setUser)(t.data)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.context.user,t=function(e){return e.history.push("/login"),null};return r.a.createElement("div",{className:"App"},r.a.createElement(N,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:A}),r.a.createElement(d.a,{exact:!0,path:"/signup",component:w}),r.a.createElement(d.a,{exact:!0,path:"/login",component:k}),r.a.createElement(d.a,{exact:!0,path:"/logout",component:_}),r.a.createElement(d.a,{exact:!0,path:"/user/:id",component:M}),r.a.createElement(d.a,{exact:!0,path:"/user/:id/artwork/:artworkId",component:W}),e?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{exact:!0,path:"/messages",component:H}),r.a.createElement(d.a,{exact:!0,path:"/messages/:id",component:H}),r.a.createElement(d.a,{exact:!0,path:"/user/:id/artwork",component:P}),r.a.createElement(d.a,{exact:!0,path:"/user/:id/artwork",component:L})):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{exact:!0,path:"/messages",component:t}),r.a.createElement(d.a,{exact:!0,path:"/messages/:id",component:t}),r.a.createElement(d.a,{exact:!0,path:"/user/:id/artwork",component:t}),r.a.createElement(d.a,{exact:!0,path:"/user/:id/artwork",component:t})),r.a.createElement(d.a,{component:function(e){return e.history.push("/"),null}})))}}]),a}(r.a.Component);Y.contextType=E;var G=Y;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(i.a,null,r.a.createElement(f,null,r.a.createElement(G,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[156,1,2]]]);
//# sourceMappingURL=main.87652c49.chunk.js.map