(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{155:function(e,t,a){e.exports=a(292)},160:function(e,t,a){},255:function(e,t){},292:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(33),i=a.n(l),o=a(7),s=(a(160),a(10)),c=a(11),u=a(13),m=a(12),d=a(9),p=a(4),h=a.n(p),g=a(18),b=Object(n.createContext)(),E=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:{availability:[]}},e.setUser=function(t){e.setState({user:t})},e.updateUser=function(t){h.a.put(e.state.user._id+"/profile",Object(g.a)(Object(g.a)({},e.state.user),t)).then((function(t){return e.setUser(t.data)})).catch((function(e){return console.log(e)}))},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(b.Provider,{value:Object(g.a)(Object(g.a)({},this.state),{},{setUser:this.setUser,updateUser:this.updateUser})},this.props.children)}}]),a}(n.Component),f=a(17),v=function(e,t,a,n,r,l,i){return h.a.post("/auth/signup",{username:e,password:t,email:a,birthDate:n,location:r,role:l,category:i}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},y=function(e,t){return h.a.post("/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))};function O(){var e=Object(n.useContext)(b).user,t=Object(d.f)(),a=t.pathname,l=t.search,i="/login"===a,s="/signup"===a&&"?artist=true"!==l,c="?artist=true"===l;return r.a.createElement("nav",null,r.a.createElement("div",{id:"nav-left-container"},r.a.createElement("div",{id:"nav-inner-l"},r.a.createElement(o.b,{to:"/"},r.a.createElement("img",{src:"https://res.cloudinary.com/artistree/image/upload/v1589980960/Images/ARTISTREELOGO_afkwqa.png",id:"logo",alt:"logo"}))),r.a.createElement("div",{id:"nav-right-container"},r.a.createElement("div",{id:"nav-inner-r"},r.a.createElement(o.b,{to:"/",id:"link"},r.a.createElement("a",null,"Home")),e?r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{to:"/user/".concat(e._id),id:"link"},r.a.createElement("a",null,"Profile")),r.a.createElement(o.b,{to:"/logout",id:"link"},r.a.createElement("a",null,"Logout"))):r.a.createElement(r.a.Fragment,null,!c&&r.a.createElement(o.b,{to:"/signup?artist=true",id:"link"},r.a.createElement("a",null,"Create artist profile")),!i&&r.a.createElement(o.b,{to:"/login",id:"link"},r.a.createElement("a",null,"Login")),!s&&r.a.createElement(o.b,{to:"/signup",id:"link"},r.a.createElement("a",{class:"btn btn-primary","data-toggle":"modal","data-target":"#exampleModal"},"Signup")))))))}var j=a(181),k=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",email:"",birthDate:"",location:"",message:"",categories:[],category:""},e.componentDidMount=function(){h.a.get("/categories").then((function(t){e.setState({categories:t.data})}))},e.isArtist=function(){var t=j.parse(e.props.location.search);return Boolean(t.artist)},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(f.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password,l=a.email,i=a.birthDate,o=a.location,s=a.category;v(n,r,l,i,o,e.isArtist()?"Artist":"Client",s).then((function(t){t.message?e.setState({message:t.message,username:"",password:"",email:"",birthDate:"",location:"",role:""}):((0,e.context.setUser)(t),e.props.history.push("/login"))}))},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement("div",{class:"form-popup",id:"myForm"},r.a.createElement("form",{class:"form-signup",onSubmit:this.handleSubmit},r.a.createElement("div",{class:"con"},r.a.createElement("header",{class:"head-form"},r.a.createElement("h2",null,"Signup"),r.a.createElement("p",null,"Sign up here to use our services.")),r.a.createElement("br",null),r.a.createElement("div",{class:"field-set"},r.a.createElement("label",null,"Username: "),r.a.createElement("input",{type:"text",name:"username",placeholder:"picasso",value:this.state.username,onChange:this.handleChange,id:"txt-input",class:"form-input"}),r.a.createElement("br",null),r.a.createElement("label",null,"Password: "),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:this.handleChange,id:"txt-input",class:"form-input"}),r.a.createElement("br",null),r.a.createElement("label",null,"Email: "),r.a.createElement("input",{type:"text",name:"email",placeholder:"picasso@mail.com",value:this.state.email,onChange:this.handleChange,id:"txt-input",class:"form-input"}),r.a.createElement("br",null),r.a.createElement("label",null,"Birthday: "),r.a.createElement("input",{type:"date",name:"birthDate",value:this.state.birthDate,onChange:this.handleChange,id:"txt-input",class:"form-input"}),this.isArtist()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("label",null,"Location: "),r.a.createElement("input",{type:"text",name:"location",placeholder:"City",value:this.state.location,onChange:this.handleChange,id:"txt-input",class:"form-input"}),r.a.createElement("br",null),r.a.createElement("label",null,"Type of artist: "),r.a.createElement("select",{name:"category",id:"category",value:this.state.category,onChange:this.handleChange,class:"form-input"},this.state.categories.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),this.state.message&&r.a.createElement("div",{variant:"danger"},this.state.message),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",value:"Signup",class:"signup"},"Signup"),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",class:"btn cancel",onclick:"closeForm()"},"Close"))))))}}]),a}(n.Component);k.contextType=b;var C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",message:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(f.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;y(n,r).then((function(t){if(t.message)e.setState({message:t.message,username:"",password:""});else{var a=t;(0,e.context.setUser)(a),e.props.history.push("Artist"===a.role?"/user/".concat(a._id):"/")}}))},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement("div",{class:"form-popup",id:"myForm"},r.a.createElement("form",{class:"form-login",onSubmit:this.handleSubmit},r.a.createElement("div",{class:"con"},r.a.createElement("header",{class:"head-form"},r.a.createElement("h2",null,"Login"),r.a.createElement("p",null,"Already signed up? Login here.")),r.a.createElement("br",null),r.a.createElement("div",{class:"field-set"},r.a.createElement("label",null,"Username: "),r.a.createElement("input",{type:"text",name:"username",placeholder:"picasso",value:this.state.username,onChange:this.handleChange,id:"txt-input",class:"form-input"}),r.a.createElement("br",null),r.a.createElement("label",null,"Password: "),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:this.handleChange,id:"txt-input",class:"form-input"}),this.state.message&&r.a.createElement("div",{variant:"danger"},this.state.message),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",value:"Login",class:"Login"},"Login"),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",class:"btn cancel",onclick:"closeForm()"},"Close"))))))}}]),a}(n.Component);C.contextType=b;var w=a(26),S=a(63),D=(a(140),a(141),a(3)),x=a.n(D);function F(){var e=Object(n.useState)([]),t=Object(w.a)(e,2),a=t[0],l=t[1],i=Object(n.useState)({category:"Visual Artist",location:"",search:""}),s=Object(w.a)(i,2),c=s[0],u=s[1],m=Object(n.useState)({startDate:x()(),endDate:x()().add(7,"d")}),d=Object(w.a)(m,2),p=d[0],b=p.startDate,E=p.endDate,v=d[1],y=Object(n.useState)([]),O=Object(w.a)(y,2),j=O[0],k=O[1],C=Object(n.useState)([]),D=Object(w.a)(C,2),F=D[0],A=D[1],_=Object(n.useState)(null),N=Object(w.a)(_,2),U=N[0],P=N[1];Object(n.useEffect)((function(){var e=h.a.get("/categories"),t=h.a.get("/locations"),a=h.a.get("/results");Promise.all([e,t,a]).then((function(e){var t=Object(w.a)(e,3),a=t[0],n=t[1],r=t[2];k(a.data),A(n.data),l(r.data)}))}),[]);var T=Object(n.useCallback)((function(e){u(Object(g.a)(Object(g.a)({},c),{},Object(f.a)({},e.target.name,e.target.value)))}),[c,u]),I=a.filter((function(e){var t="".concat(e.displayName,"_").concat(e.subcategory).toLowerCase().includes(c.search.toLowerCase().trim()),a=c.category===e.category||!c.category||"Other"===c.category&&t,n=c.location===e.location||!c.location,r=e.availability&&e.availability.some((function(e){var t=x()(e.startDate),a=x()(e.endDate),n=t&&t.isBetween(b,E),r=a&&a.isBetween(b,E),l=b&&b.isBetween(t,a)&&E&&E.isBetween(t,a);return n||r||l}));return a&&n&&r}));return r.a.createElement("main",null,r.a.createElement("form",{className:"searchForm",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("select",{name:"category",id:"category",onChange:T,value:c.category},j.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),"Other"===c.category&&r.a.createElement("label",{htmlFor:"subcategory"},"Custom Search",r.a.createElement("input",{type:"text",name:"search",id:"subcategory",onChange:T,value:c.search})),r.a.createElement("label",{htmlFor:"location"},"Location"),r.a.createElement("select",{name:"location",id:"location",onChange:T,value:c.location},r.a.createElement("option",{value:""}),F.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(S.DateRangePicker,{startDate:b,startDateId:"your_unique_start_date_id",endDate:E,endDateId:"your_unique_end_date_id",onDatesChange:function(e){var t=e.startDate,a=e.endDate;v({startDate:t,endDate:a})},focusedInput:U,onFocusChange:function(e){return P(e)}})),r.a.createElement("ul",null,I.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(o.b,{to:"/user/".concat(e._id)},r.a.createElement("img",{src:e.imageUrl,alt:"",height:"100"}),r.a.createElement("p",null,e.username),r.a.createElement("p",null,e.category),r.a.createElement("p",null,e.subcategory)))}))))}function A(e){var t=Object(n.useContext)(b).setUser;return Object(n.useEffect)((function(){h.a.delete("/auth/logout").then((function(a){t(null),e.history.push("/")}))}),[e.history,t]),null}var _=a(154),N=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={visibility:!1,startDate:null,endDate:null},e.toggleVisibility=function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{visibility:!e.state.visibility}))},e.makeCalEntry=function(){e.context.updateUser(Object(g.a)(Object(g.a)({},e.context.user),{},{availability:[].concat(Object(_.a)(e.context.user.availability?e.context.user.availability:[]),[{startDate:e.state.startDate,endDate:e.state.endDate}])})),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{startDate:null,endDate:null}))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.state.visibility?r.a.createElement("div",null,r.a.createElement(S.DateRangePicker,{startDate:this.state.startDate,startDateId:"your_unique_start_date_id",endDate:this.state.endDate,endDateId:"your_unique_end_date_id",onDatesChange:function(t){var a=t.startDate,n=t.endDate;return e.setState({startDate:a,endDate:n})},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})}}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){if(e.state.startDate&&e.state.endDate)return e.makeCalEntry();console.log("no can do, sir")}},"Submit"),r.a.createElement("button",{onClick:this.toggleVisibility},"Close")):r.a.createElement(r.a.Fragment,null,this.props.allowedToEdit&&r.a.createElement("button",{onClick:this.toggleVisibility},"Add Availability"))}}]),a}(n.Component);N.contextType=b;var U=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.context.user.availability,t=e?e.map((function(e){return r.a.createElement("li",{key:e._id},e.startDate.split("T")[0]," to ",e.endDate.split("T")[0])})):null;return r.a.createElement("div",null,r.a.createElement("h1",null,"Your availabilities:"),r.a.createElement("ul",{id:"Availabilities"},t))}}]),a}(n.Component);U.contextType=b;var P=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={title:"",description:"",images:[],uploadOn:!1},e.handleChange=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(f.a)({},a,n))},e.uploadMultiple=function(t){t.preventDefault();for(var a=new FormData,n=t.target.files,r=0;r<n.length;r++)a.append("files",n[r]);e.setState({uploadOn:!0},(function(){h.a.post("/upload/multiple",a,{headers:{crossdomain:!0,"Content-Type":"undefined"}}).then((function(t){var a=t.data.data.map((function(e){return e.url}));e.setState({images:a,uploadOn:!1})})).catch((function(e){return console.log(e)}))}))},e.handleSubmit=function(t){t.preventDefault(),h.a.post("/artwork",{title:e.state.title,description:e.state.description,images:e.state.images}).then((function(){e.setState({title:"",description:"",images:[]}),e.props.closeForm(),e.props.getData()})).catch((function(e){console.log(e)}))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Title:",r.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("label",null,"Description:",r.a.createElement("input",{type:"text",name:"description",value:this.state.description,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Add Artwork"),r.a.createElement("label",null,"Select images:",r.a.createElement("input",{type:"file",name:"files",multiple:!0,onChange:this.uploadMultiple}))),!this.state.uploadOn&&r.a.createElement("input",{type:"submit",value:"Submit"})))}}]),a}(n.Component),T=function(e){return r.a.createElement("div",null,e.artworks.length>0&&r.a.createElement("h2",null,"Artworks:"),e.artworks.map((function(t){return r.a.createElement("div",{key:t._id},r.a.createElement(o.b,{to:"/user/".concat(e.profileId,"/artwork/").concat(t._id)},r.a.createElement("h3",null,t.title),r.a.createElement("img",{src:t.images[0],alt:"",height:"200"})))})))},I=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={imageUrl:null,username:null,displayName:"",bio:"",location:null,role:null,categories:[],category:"Visual Artist",subcategory:"",artworks:[],images:[],error:!1,addArtworkForm:!1,editPicture:!1,uploadOn:!1},e.componentDidMount=function(){e.getData(),h.a.get("/categories").then((function(t){e.setState({categories:t.data})}))},e.handleFormChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(f.a)({},n,r))},e.handleFileChange=function(t){var a=new FormData;a.append("imageUrl",t.target.files[0]),e.setState({uploadOn:!0},(function(){h.a.post("/upload/single",a).then((function(t){e.setState({imageUrl:t.data.secure_url,uploadOn:!1,editPicture:!1})})).catch((function(e){return console.log(e)}))}))},e.handleSubmit=function(t){t.preventDefault();var a=e.context.user,n=a.availability,r=e.state,l=r.displayName,i=r.bio,o=r.location,s=r.category,c=r.subcategory;console.log(n),h.a.put("/user/".concat(a._id,"/profile"),{displayName:l,bio:i,location:o,category:s,subcategory:c,availability:n}).then((function(t){var a=t.data,n=a.displayName,r=a.bio,l=a.location,i=a.category,o=a.subcategory,s=a.availability;e.setState({displayName:n,bio:r,location:l,category:i,subcategory:o,availability:s,editProfile:!1})}))},e.getData=function(){var t=e.props.match.params.id;h.a.get("/user/".concat(t)).then((function(t){var a=t.data,n=a.displayName,r=a.bio,l=a.location,i=a.category,o=a.subcategory,s=a.availability,c=a.imageUrl,u=a.username,m=a.artworks,d=a.role;e.setState({displayName:n,bio:r,location:l,category:i,subcategory:o,availability:s,imageUrl:c,username:u,artworks:m,role:d})})).catch((function(e){console.log(e)}))},e.toggleEditForm=function(){e.setState({editPicture:!e.state.editPicture})},e.toggleArtwork=function(){e.setState({addArtworkForm:!e.state.addArtworkForm})},e.toggleProfileEdit=function(){e.setState({editProfile:!e.state.editProfile})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;if(this.state.error)return r.a.createElement("div",null,this.state.error.toString());if(!this.state.username)return r.a.createElement(r.a.Fragment,null);var t=this.context.user,a=this.props.match.params.id,n=t._id===a,l="Artist"===t.role,i=this.state.displayName&&this.state.bio&&this.state.location&&this.state.category;return r.a.createElement("main",{class:"page"},r.a.createElement("div",{class:"container"},r.a.createElement("header",{class:"profile-banner"},r.a.createElement("i",{class:"fa fa-bars","aria-hidden":"true"})),r.a.createElement("section",null,r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"left col-lg-4"},r.a.createElement("div",{class:"photo-left"},r.a.createElement("img",{class:"photo",style:{height:"200px"},src:this.state.imageUrl,alt:this.state.displayName}),n?r.a.createElement(o.b,{to:"/messages"},"My messages"):r.a.createElement(o.b,{to:"/messages/".concat(a)},"Send a message"),r.a.createElement("div",null,n&&r.a.createElement("button",{type:"button",onClick:this.toggleEditForm},"Edit Picture"),this.state.editPicture&&r.a.createElement("form",null,r.a.createElement("input",{type:"file",onChange:function(t){return e.handleFileChange(t)}})))),r.a.createElement("h4",{class:"name"},this.state.displayName),r.a.createElement("p",{class:"info"},this.state.category),r.a.createElement("p",{class:"info"},this.state.subcategory),r.a.createElement("p",{class:"info"},this.state.location)))),r.a.createElement("p",null,this.state.getData),n&&r.a.createElement("button",{className:i?"button-edit-profile":"button-complete-profile",type:"button",onClick:this.toggleProfileEdit},i?"Edit Profile":"Complete your profile"),this.state.editProfile&&r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"displayName"},"Display Name"),r.a.createElement("input",{type:"text",name:"displayName",id:"displayName",onChange:this.handleFormChange,value:this.state.displayName}),r.a.createElement("label",{htmlFor:"bio"},"Bio"),r.a.createElement("textarea",{type:"text",name:"bio",id:"bio",value:this.state.bio,onChange:this.handleFormChange}),r.a.createElement("label",{htmlFor:"location"},"Location"),r.a.createElement("input",{onChange:this.handleFormChange,type:"text",name:"location",id:"location",value:this.state.location}),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"category"},"Artist Type"),r.a.createElement("select",{name:"category",id:"category",value:this.state.category,onChange:this.handleFormChange},this.state.categories.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("label",{htmlFor:"subcategory"},"Subcategory"),r.a.createElement("input",{type:"text",name:"subcategory",id:"subcategory",value:this.state.subcategory,onChange:this.handleFormChange})),r.a.createElement("button",{type:"submit"},"Update Profile")),r.a.createElement("p",null,this.state.bio),r.a.createElement("div",null,r.a.createElement(T,{artworks:this.state.artworks,profileId:a}),n&&l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",onClick:this.toggleArtwork},"Add Artwork")),this.state.addArtworkForm&&r.a.createElement(P,{getData:this.getData,closeForm:function(){e.setState({addArtworkForm:!1})}})),"Artist"===t.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{allowedToEdit:n}),r.a.createElement(N,{allowedToEdit:n}))))}}]),a}(n.Component);function L(e){var t=e.message,a=Object(n.useContext)(b).user,l=t.from.username===a.username,i=l?t.to._id:t.from._id,s=t.text.substring(0,10)+"...";return r.a.createElement("li",null,r.a.createElement(o.b,{to:"/messages/".concat(i),className:"message-preview"},r.a.createElement("div",{className:"message-profile-pic",style:{backgroundImage:"url(".concat(l?t.to.imageUrl:t.from.imageUrl,")")}}),r.a.createElement("div",{className:"name-and-message"},r.a.createElement("p",{className:"name-from"},l?t.to.username:t.from.username),r.a.createElement("p",null,l?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"you:")," ",s):s))))}function M(){var e=Object(n.useState)([]),t=Object(w.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){console.log("wft"),h.a.get("/messages").then((function(e){l(e.data)}))}),[l]),r.a.createElement("aside",{className:"messages-list"},r.a.createElement("ul",null,a.map((function(e){return r.a.createElement(L,{key:e._id,message:e})}))))}function B(e){var t=e.message,a=e.user,n=t.from.username===a.username;return r.a.createElement("li",{className:n?"message outgoing":"message incoming"},!n&&r.a.createElement(o.b,{to:"/user/".concat(t.from._id)},r.a.createElement("div",{className:"message-profile-pic small",style:{backgroundImage:"url(".concat(t.from.imageUrl,")")}})),r.a.createElement("p",null,t.text))}function q(e){var t=Object(n.useContext)(b).user,a=Object(n.useState)(""),l=Object(w.a)(a,2),i=l[0],o=l[1],s=Object(n.useState)([]),c=Object(w.a)(s,2),u=c[0],m=c[1],d=function(){e.id&&h.a.get("/messages/".concat(e.id)).then((function(e){m(e.data)}))};Object(n.useEffect)((function(){d()}),[e.id]);return r.a.createElement("section",{className:"messages-chat"},e.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,u.map((function(e){return r.a.createElement(B,{message:e,user:t})}))),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),h.a.post("/messages/".concat(e.id),{message:i}).then((function(e){d(),o("")}))},className:"message-form"},r.a.createElement("div",{class:"message-box-container"},r.a.createElement("label",{htmlFor:"Message",className:"message-label"},"Message"),r.a.createElement("input",{className:"message-input",value:i,onChange:function(e){o(e.target.value)},type:"text",name:"message",id:"Message"})),r.a.createElement("button",{className:"message-send",type:"submit"},"Send"))))}function V(e){var t=e.match.params.id,a=Object(n.useContext)(b).user;return Object(n.useEffect)((function(){a._id===t&&e.history.push("/messages")}),[a._id,t]),r.a.createElement("main",{className:"messages-page container"},r.a.createElement(M,{id:t}),r.a.createElement(q,{id:t}))}I.contextType=b,I.contextType=b;var R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Edit Artwork: "),r.a.createElement("form",{onSubmit:this.props.handleSubmit},r.a.createElement("label",{htmlFor:"title"},"Title:"),r.a.createElement("input",{type:"text",name:"title",id:"title",value:this.props.title,onChange:function(t){return e.props.handleChange(t)}}),r.a.createElement("label",{htmlFor:"description"},"Description:"),r.a.createElement("input",{type:"text",name:"description",id:"description",value:this.props.description,onChange:function(t){return e.props.handleChange(t)}}),r.a.createElement("label",{htmlFor:"submit"},"Add Artwork"),r.a.createElement("input",{type:"submit",value:"Submit",id:"submit"})))}}]),a}(n.Component),J=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={artwork:null,title:"",description:"",images:[],editForm:!1,taskForm:!1,error:null},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(f.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.props.match.params.artworkId;h.a.put("/artwork/".concat(a),{title:e.state.title,description:e.state.description,images:e.state.images}).then((function(t){e.setState({artwork:t.data,title:t.data.title,description:t.data.description,editForm:!1})})).catch((function(e){console.log(e)}))},e.getData=function(){var t=e.props.match.params.artworkId;h.a.get("/artwork/".concat(t)).then((function(t){e.setState({artwork:t.data,title:t.data.title,description:t.data.description,images:t.data.images})})).catch((function(t){404===t.response.status&&e.setState({error:"Not found"})}))},e.deleteArtwork=function(){var t=e.props.match.params.artworkId,a=e.context.user;h.a.delete("/artwork/".concat(t)).then((function(){e.props.history.push("/user/".concat(a._id))})).catch((function(e){console.log(e)}))},e.toggleEditForm=function(){e.setState({editForm:!e.state.editForm})},e.toggleTaskForm=function(){e.setState({taskForm:!e.state.taskForm})},e.componentDidMount=function(){e.getData()},e}return Object(c.a)(a,[{key:"render",value:function(){if(this.state.error)return r.a.createElement("div",null,this.state.error);if(!this.state.artwork)return r.a.createElement(r.a.Fragment,null);var e=this.props.match.params.id,t=this.context.user;return r.a.createElement("main",null,r.a.createElement("h1",null,this.state.artwork.title),r.a.createElement("img",{src:this.state.images[0],alt:""}),r.a.createElement("p",null,this.state.artwork.description),t._id===e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.deleteArtwork},"Delete this Artwork"),r.a.createElement("button",{onClick:this.toggleEditForm},"Show edit form")),this.state.editForm&&r.a.createElement(R,Object.assign({},this.state,{handleChange:this.handleChange,handleSubmit:this.handleSubmit})))}}]),a}(n.Component);J.contextType=b;var W=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("/auth/loggedin").then((function(t){console.log(t.data),(0,e.context.setUser)(t.data)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.context.user,t=function(e){return e.history.push("/login"),null};return r.a.createElement("div",{className:"App"},r.a.createElement(O,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:F}),r.a.createElement(d.a,{exact:!0,path:"/signup",component:k}),r.a.createElement(d.a,{exact:!0,path:"/login",component:C}),r.a.createElement(d.a,{exact:!0,path:"/logout",component:A}),r.a.createElement(d.a,{exact:!0,path:"/user/:id",component:I}),r.a.createElement(d.a,{exact:!0,path:"/user/:id/artwork/:artworkId",component:J}),e?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{exact:!0,path:"/messages",component:V}),r.a.createElement(d.a,{exact:!0,path:"/messages/:id",component:V}),r.a.createElement(d.a,{exact:!0,path:"/user/:id/artwork",component:P}),r.a.createElement(d.a,{exact:!0,path:"/user/:id/artwork",component:T})):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{exact:!0,path:"/messages",component:t}),r.a.createElement(d.a,{exact:!0,path:"/messages/:id",component:t}),r.a.createElement(d.a,{exact:!0,path:"/user/:id/artwork",component:t}),r.a.createElement(d.a,{exact:!0,path:"/user/:id/artwork",component:t})),r.a.createElement(d.a,{component:function(e){return e.history.push("/"),null}})))}}]),a}(r.a.Component);W.contextType=b;var G=W;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(o.a,null,r.a.createElement(E,null,r.a.createElement(G,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[155,1,2]]]);
//# sourceMappingURL=main.84ef092d.chunk.js.map