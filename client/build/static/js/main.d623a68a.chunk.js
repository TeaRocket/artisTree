(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{155:function(e,t,a){e.exports=a(292)},160:function(e,t,a){},255:function(e,t){},292:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(33),i=a.n(l),o=a(13),c=(a(160),a(9)),s=a(10),u=a(12),m=a(11),d=a(8),h=a(4),p=a.n(h),g=a(18),b=Object(n.createContext)(),f=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:{availability:[]}},e.setUser=function(t){e.setState({user:t})},e.updateUser=function(t){p.a.put(e.state.user._id+"/profile",Object(g.a)(Object(g.a)({},e.state.user),t)).then((function(t){return e.setUser(t.data)})).catch((function(e){return console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(b.Provider,{value:Object(g.a)(Object(g.a)({},this.state),{},{setUser:this.setUser,updateUser:this.updateUser})},this.props.children)}}]),a}(n.Component),E=a(17),v=function(e,t,a,n,r,l,i){return p.a.post("/auth/signup",{username:e,password:t,email:a,birthDate:n,location:r,role:l,category:i}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},y=function(e,t){return p.a.post("/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))};function O(){var e=Object(n.useContext)(b).user,t=Object(d.e)(),a=t.pathname,l=t.search,i="/login"===a,c="/signup"===a&&"?artist=true"!==l,s="?artist=true"===l;return r.a.createElement("div",{id:"Nav"},r.a.createElement("div",{id:"nav-inner-l"},r.a.createElement(o.b,{to:"/"},r.a.createElement("img",{src:window.location.origin+"/artistree.png",id:"logo",alt:"logo"}))),r.a.createElement("div",{id:"nav-inner-r"},r.a.createElement(o.b,{to:"/"},"Home"),e?r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{to:"/user/".concat(e._id)},"Profile"),r.a.createElement(o.b,{to:"/logout"},"Logout")):r.a.createElement(r.a.Fragment,null,!s&&r.a.createElement(o.b,{to:"/signup?artist=true"},"Create artist profile"),!i&&r.a.createElement(o.b,{to:"/login"},"Login"),!c&&r.a.createElement(o.b,{to:"/signup"},"Signup"))))}var j=a(181),C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",email:"",birthDate:"",location:"",message:"",categories:[],category:""},e.componentDidMount=function(){p.a.get("/categories").then((function(t){e.setState({categories:t.data})}))},e.isArtist=function(){var t=j.parse(e.props.location.search);return Boolean(t.artist)},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(E.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password,l=a.email,i=a.birthDate,o=a.location,c=a.category;v(n,r,l,i,o,e.isArtist()?"Artist":"Client",c).then((function(t){t.message?e.setState({message:t.message,username:"",password:"",email:"",birthDate:"",location:"",role:""}):((0,e.context.setUser)(t),e.props.history.push("/login"))}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(O,null),r.a.createElement("h2",null,"Signup"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Username: "),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username"}),r.a.createElement("label",null,"Password: "),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"}),r.a.createElement("label",null,"Email: "),r.a.createElement("input",{type:"text",name:"email",value:this.state.email,onChange:this.handleChange,id:"email"}),r.a.createElement("label",null,"Birthdate: "),r.a.createElement("input",{type:"date",name:"birthDate",value:this.state.birthDate,onChange:this.handleChange,id:"birthDate"}),this.isArtist()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Location: "),r.a.createElement("input",{type:"text",name:"location",value:this.state.location,onChange:this.handleChange,id:"location"}),r.a.createElement("label",null,"Type of artist: "),r.a.createElement("select",{name:"category",id:"category",value:this.state.category,onChange:this.handleChange},this.state.categories.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),this.state.message&&r.a.createElement("div",{variant:"danger"},this.state.message),r.a.createElement("input",{type:"submit",value:"Signup"})))}}]),a}(n.Component);C.contextType=b;var w=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",message:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(E.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;y(n,r).then((function(t){if(t.message)e.setState({message:t.message,username:"",password:""});else{var a=t;(0,e.context.setUser)(a),e.props.history.push("Artist"===a.role?"/user/".concat(a._id):"/")}}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(O,null),r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Username: "),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username"}),r.a.createElement("label",null,"Password: "),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"}),this.state.message&&r.a.createElement("div",{variant:"danger"},this.state.message),r.a.createElement("input",{type:"submit",value:"Login"})))}}]),a}(n.Component);w.contextType=b;var k=a(26),D=a(63),S=(a(140),a(141),a(3)),F=a.n(S);function x(){var e=Object(n.useState)([]),t=Object(k.a)(e,2),a=t[0],l=t[1],i=Object(n.useState)({category:"Visual Artist",location:"",search:""}),c=Object(k.a)(i,2),s=c[0],u=c[1],m=Object(n.useState)({startDate:F()(),endDate:F()().add(7,"d")}),d=Object(k.a)(m,2),h=d[0],b=h.startDate,f=h.endDate,v=d[1],y=Object(n.useState)([]),j=Object(k.a)(y,2),C=j[0],w=j[1],S=Object(n.useState)([]),x=Object(k.a)(S,2),A=x[0],_=x[1],U=Object(n.useState)(null),N=Object(k.a)(U,2),P=N[0],T=N[1];Object(n.useEffect)((function(){var e=p.a.get("/categories"),t=p.a.get("/locations"),a=p.a.get("/results");Promise.all([e,t,a]).then((function(e){var t=Object(k.a)(e,3),a=t[0],n=t[1],r=t[2];w(a.data),_(n.data),l(r.data)}))}),[]);var I=Object(n.useCallback)((function(e){u(Object(g.a)(Object(g.a)({},s),{},Object(E.a)({},e.target.name,e.target.value)))}),[s,u]),M=a.filter((function(e){var t="".concat(e.displayName,"_").concat(e.subcategory).toLowerCase().includes(s.search.toLowerCase().trim()),a=s.category===e.category||!s.category||"Other"===s.category&&t,n=s.location===e.location||!s.location,r=e.availability&&e.availability.some((function(e){var t=F()(e.startDate),a=F()(e.endDate),n=t&&t.isBetween(b,f),r=a&&a.isBetween(b,f),l=b&&b.isBetween(t,a)&&f&&f.isBetween(t,a);return n||r||l}));return a&&n&&r}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),r.a.createElement("section",null,r.a.createElement("form",{className:"searchForm",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("select",{name:"category",id:"category",onChange:I,value:s.category},C.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),"Other"===s.category&&r.a.createElement("label",{htmlFor:"subcategory"},"Custom Search",r.a.createElement("input",{type:"text",name:"search",id:"subcategory",onChange:I,value:s.search})),r.a.createElement("label",{htmlFor:"location"},"Location"),r.a.createElement("select",{name:"location",id:"location",onChange:I,value:s.location},r.a.createElement("option",{value:""}),A.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(D.DateRangePicker,{startDate:b,startDateId:"your_unique_start_date_id",endDate:f,endDateId:"your_unique_end_date_id",onDatesChange:function(e){var t=e.startDate,a=e.endDate;v({startDate:t,endDate:a})},focusedInput:P,onFocusChange:function(e){return T(e)}})),r.a.createElement("ul",null,M.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(o.b,{to:"/user/".concat(e._id)},r.a.createElement("img",{src:e.imageUrl,alt:"",height:"100"}),r.a.createElement("p",null,e.username),r.a.createElement("p",null,e.category),r.a.createElement("p",null,e.subcategory)))})))))}function A(e){var t=Object(n.useContext)(b).setUser;return Object(n.useEffect)((function(){p.a.delete("/auth/logout").then((function(a){t(null),e.history.push("/")}))}),[e.history,t]),null}var _=a(154),U=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={visibility:!1,startDate:null,endDate:null},e.toggleVisibility=function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{visibility:!e.state.visibility}))},e.makeCalEntry=function(){e.context.updateUser(Object(g.a)(Object(g.a)({},e.context.user),{},{availability:[].concat(Object(_.a)(e.context.user.availability?e.context.user.availability:[]),[{startDate:e.state.startDate,endDate:e.state.endDate}])})),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{startDate:null,endDate:null}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return this.state.visibility?r.a.createElement("div",null,r.a.createElement(D.DateRangePicker,{startDate:this.state.startDate,startDateId:"your_unique_start_date_id",endDate:this.state.endDate,endDateId:"your_unique_end_date_id",onDatesChange:function(t){var a=t.startDate,n=t.endDate;return e.setState({startDate:a,endDate:n})},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})}}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){if(e.state.startDate&&e.state.endDate)return e.makeCalEntry();console.log("no can do, sir")}},"Submit"),r.a.createElement("button",{onClick:this.toggleVisibility},"Close")):r.a.createElement(r.a.Fragment,null,this.props.allowedToEdit&&r.a.createElement("button",{onClick:this.toggleVisibility},"Add Availability"))}}]),a}(n.Component);U.contextType=b;var N=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.context.user.availability,t=e?e.map((function(e){return r.a.createElement("li",{key:e._id},e.startDate.split("T")[0]," to ",e.endDate.split("T")[0])})):null;return r.a.createElement("div",null,r.a.createElement("h1",null,"Your availabilities:"),r.a.createElement("ul",{id:"Availabilities"},t))}}]),a}(n.Component);N.contextType=b;var P=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={title:"",description:"",images:[],uploadOn:!1},e.handleChange=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(E.a)({},a,n))},e.uploadMultiple=function(t){t.preventDefault();for(var a=new FormData,n=t.target.files,r=0;r<n.length;r++)a.append("files",n[r]);e.setState({uploadOn:!0},(function(){p.a.post("/upload/multiple",a,{headers:{crossdomain:!0,"Content-Type":"undefined"}}).then((function(t){var a=t.data.data.map((function(e){return e.url}));e.setState({images:a,uploadOn:!1})})).catch((function(e){return console.log(e)}))}))},e.handleSubmit=function(t){t.preventDefault(),p.a.post("/artwork",{title:e.state.title,description:e.state.description,images:e.state.images}).then((function(){e.setState({title:"",description:"",images:[]}),e.props.closeForm(),e.props.getData()})).catch((function(e){console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Title:",r.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("label",null,"Description:",r.a.createElement("input",{type:"text",name:"description",value:this.state.description,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Add Artwork"),r.a.createElement("label",null,"Select images:",r.a.createElement("input",{type:"file",name:"files",multiple:!0,onChange:this.uploadMultiple}))),!this.state.uploadOn&&r.a.createElement("input",{type:"submit",value:"Submit"})))}}]),a}(n.Component),T=function(e){return r.a.createElement("div",null,e.artworks.length>0&&r.a.createElement("h2",null,"Artworks:"),e.artworks.map((function(t){return r.a.createElement("div",{key:t._id},r.a.createElement(o.b,{to:"/user/".concat(e.profileId,"/artwork/").concat(t._id)},r.a.createElement("h3",null,t.title),r.a.createElement("img",{src:t.images[0],alt:"",height:"200"})))})))},I=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={imageUrl:null,username:null,displayName:"",bio:"",location:null,role:null,categories:[],category:"",subcategory:"",artworks:[],images:[],error:!1,addArtworkForm:!1,editPicture:!1,uploadOn:!1},e.componentDidMount=function(){e.getData(),p.a.get("/categories").then((function(t){e.setState({categories:t.data})}))},e.handleFormChange=function(t){e.setState(Object(E.a)({},t.target.name,t.target.value))},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(E.a)({},n,r))},e.handleFileChange=function(t){var a=new FormData;a.append("imageUrl",t.target.files[0]),e.setState({uploadOn:!0},(function(){p.a.post("/upload/single",a).then((function(t){e.setState({imageUrl:t.data.secure_url,uploadOn:!1})})).catch((function(e){return console.log(e)}))}))},e.handleSubmit=function(t){t.preventDefault();var a=e.context.user,n=a.availability,r=e.state,l=r.displayName,i=r.bio,o=r.location,c=r.category,s=r.subcategory;console.log(n),p.a.put("/user/".concat(a._id,"/profile"),{displayName:l,bio:i,location:o,category:c,subcategory:s,availability:n}).then((function(t){var a=t.data,n=a.displayName,r=a.bio,l=a.location,i=a.category,o=a.subcategory,c=a.availability;e.setState({displayName:n,bio:r,location:l,category:i,subcategory:o,availability:c,editProfile:!1})}))},e.getData=function(){var t=e.props.match.params.id;p.a.get("/user/".concat(t)).then((function(t){var a=t.data,n=a.displayName,r=a.bio,l=a.location,i=a.category,o=a.subcategory,c=a.availability,s=a.imageUrl,u=a.username,m=a.artworks,d=a.role;e.setState({displayName:n,bio:r,location:l,category:i,subcategory:o,availability:c,imageUrl:s,username:u,artworks:m,role:d})})).catch((function(e){console.log(e)}))},e.toggleEditForm=function(){e.setState({editPicture:!e.state.editPicture})},e.toggleArtwork=function(){e.setState({addArtworkForm:!e.state.addArtworkForm})},e.toggleProfileEdit=function(){e.setState({editProfile:!e.state.editProfile})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;if(this.state.error)return r.a.createElement("div",null,this.state.error.toString());if(!this.state.username)return r.a.createElement(r.a.Fragment,null);var t=this.context.user,a=this.props.match.params.id,n=t._id===a;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),r.a.createElement("div",null,r.a.createElement("h1",null,this.state.displayName),r.a.createElement("div",null,r.a.createElement("img",{style:{height:"200px"},src:this.state.imageUrl,alt:this.state.displayName}),n?r.a.createElement(o.b,{to:"/messages"},"My messages"):r.a.createElement(o.b,{to:"/messages/".concat(a)},"Send a message"),r.a.createElement("div",null,n&&r.a.createElement("button",{type:"button",onClick:this.toggleEditForm},"Edit Picture"),this.state.editPicture&&r.a.createElement("form",null,r.a.createElement("input",{type:"file",onChange:function(t){return e.handleFileChange(t)}})))),r.a.createElement("p",null,this.state.getData),n&&r.a.createElement("button",{type:"button",onClick:this.toggleProfileEdit},"Edit Profile"),this.state.editProfile&&r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"displayName"},"Display Name"),r.a.createElement("input",{type:"text",name:"displayName",id:"displayName",onChange:this.handleFormChange,value:this.state.displayName}),r.a.createElement("label",{htmlFor:"bio"},"Bio"),r.a.createElement("textarea",{type:"text",name:"bio",id:"bio",value:this.state.bio,onChange:this.handleFormChange}),r.a.createElement("label",{htmlFor:"location"},"Location"),r.a.createElement("input",{onChange:this.handleFormChange,type:"text",name:"location",id:"location",value:this.state.location}),r.a.createElement("label",{htmlFor:"category"},"Artist Type"),r.a.createElement("select",{name:"category",id:"category",value:this.state.category,onChange:this.handleFormChange},this.state.categories.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("label",{htmlFor:"subcategory"},"Subcategory"),r.a.createElement("input",{type:"text",name:"subcategory",id:"subcategory",value:this.state.subcategory,onChange:this.handleFormChange}),r.a.createElement("button",{type:"submit"},"Update Profile")),r.a.createElement("p",null,this.state.location),r.a.createElement("p",null,this.state.bio),r.a.createElement("p",null,this.state.category),r.a.createElement("p",null,this.state.subcategory),r.a.createElement("div",null,r.a.createElement(T,{artworks:this.state.artworks,profileId:a}),n&&"Artist"===t.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",onClick:this.toggleArtwork},"Add Artwork")),this.state.addArtworkForm&&r.a.createElement(P,{getData:this.getData,closeForm:function(){e.setState({addArtworkForm:!1})}})),"Artist"===t.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{allowedToEdit:n}),r.a.createElement(U,{allowedToEdit:n}))))}}]),a}(n.Component);function M(e){var t=e.message,a=Object(n.useContext)(b).user,l=t.from.username===a.username?t.to._id:t.from._id;return console.log(t),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/messages/".concat(l)},r.a.createElement("div",{className:"message-profile-pic",style:{backgroundImage:"url(".concat(t.from.username===a.username?t.to.imageUrl:t.from.imageUrl,")")}}),r.a.createElement("p",null,t.from.username===a.username?t.to.username:t.from.username),r.a.createElement("p",null,t.text)))}function B(){var e=Object(n.useState)([]),t=Object(k.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){p.a.get("/messages").then((function(e){l(e.data)}))}),[l]),r.a.createElement("div",null,r.a.createElement("ul",null,a.map((function(e){return r.a.createElement(M,{key:e._id,message:e})}))))}function L(e){Object(n.useContext)(b).user;var t=Object(n.useState)(""),a=Object(k.a)(t,2),l=a[0],i=a[1],o=Object(n.useState)([]),c=Object(k.a)(o,2),s=c[0],u=c[1],m=function(){p.a.get("/messages/".concat(e.id)).then((function(e){u(e.data)}))};Object(n.useEffect)((function(){m()}),[e.id]);return r.a.createElement("div",null,e.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,s.map((function(e){return r.a.createElement("li",null,r.a.createElement("p",null,"From: ",e.from.username),r.a.createElement("p",null,"To: ",e.to.username),r.a.createElement("p",null,e.text))}))),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),p.a.post("/messages/".concat(e.id),{message:l}).then((function(e){m(),i("")}))}},r.a.createElement("label",{htmlFor:"Message"},"Message"),r.a.createElement("textarea",{value:l,onChange:function(e){i(e.target.value)},type:"text",name:"message",id:"Message"}),r.a.createElement("button",{type:"submit"},"Send"))))}function q(e){var t=e.match.params.id,a=Object(n.useContext)(b).user;return Object(n.useEffect)((function(){a._id===t&&e.history.push("/messages")}),[a._id,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),r.a.createElement("div",null,r.a.createElement(B,{id:t}),r.a.createElement(L,{id:t})))}I.contextType=b,I.contextType=b;var V=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Edit Artwork: "),r.a.createElement("form",{onSubmit:this.props.handleSubmit},r.a.createElement("label",{htmlFor:"title"},"Title:"),r.a.createElement("input",{type:"text",name:"title",id:"title",value:this.props.title,onChange:function(t){return e.props.handleChange(t)}}),r.a.createElement("label",{htmlFor:"description"},"Description:"),r.a.createElement("input",{type:"text",name:"description",id:"description",value:this.props.description,onChange:function(t){return e.props.handleChange(t)}}),r.a.createElement("label",{htmlFor:"submit"},"Add Artwork"),r.a.createElement("input",{type:"submit",value:"Submit",id:"submit"})))}}]),a}(n.Component),J=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={artwork:null,title:"",description:"",images:[],editForm:!1,taskForm:!1,error:null},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(E.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.props.match.params.id;p.a.put("/artwork/".concat(a),{title:e.state.title,description:e.state.description,images:e.state.images}).then((function(t){e.setState({artwork:t.data,title:t.data.title,description:t.data.description,editForm:!1})})).catch((function(e){console.log(e)}))},e.getData=function(){var t=e.props.match.params.id;p.a.get("/artwork/".concat(t)).then((function(t){e.setState({artwork:t.data,title:t.data.title,description:t.data.description,images:t.data.images})})).catch((function(t){404===t.response.status&&e.setState({error:"Not found"})}))},e.deleteArtwork=function(){var t=e.props.match.params.id,a=e.context.user;p.a.delete("/artwork/".concat(t)).then((function(){e.props.history.push("/user/".concat(a._id))})).catch((function(e){console.log(e)}))},e.toggleEditForm=function(){e.setState({editForm:!e.state.editForm})},e.toggleTaskForm=function(){e.setState({taskForm:!e.state.taskForm})},e.componentDidMount=function(){e.getData()},e}return Object(s.a)(a,[{key:"render",value:function(){if(this.state.error)return r.a.createElement("div",null,this.state.error);if(!this.state.artwork)return r.a.createElement(r.a.Fragment,null);var e=this.props.user,t=this.state.artwork.owner;return e&&e._id===t&&!0,r.a.createElement("div",null,r.a.createElement("h1",null,this.state.artwork.title),r.a.createElement("img",{src:this.state.images[0],alt:""}),r.a.createElement("p",null,this.state.artwork.description),r.a.createElement("button",{onClick:this.deleteArtwork},"Delete this Artwork"),r.a.createElement("button",{onClick:this.toggleEditForm},"Show edit form"),this.state.editForm&&r.a.createElement(V,Object.assign({},this.state,{handleChange:this.handleChange,handleSubmit:this.handleSubmit})))}}]),a}(n.Component);J.contextType=b;var R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/auth/loggedin").then((function(t){console.log(t.data),(0,e.context.setUser)(t.data)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,{exact:!0,path:"/",component:x}),r.a.createElement(d.a,{exact:!0,path:"/signup",component:C}),r.a.createElement(d.a,{exact:!0,path:"/login",component:w}),r.a.createElement(d.a,{exact:!0,path:"/logout",component:A}),r.a.createElement(d.a,{exact:!0,path:"/user/:id",component:I}),r.a.createElement(d.a,{exact:!0,path:"/messages/:id",component:q}),r.a.createElement(d.a,{exact:!0,path:"/messages",component:q}),r.a.createElement(d.a,{exact:!0,path:"/user/:id/artwork",component:P}),r.a.createElement(d.a,{exact:!0,path:"/user/:id/artwork",component:T}),r.a.createElement(d.a,{exact:!0,path:"/user/:id/artwork/:id",component:J}))}}]),a}(r.a.Component);R.contextType=b;var W=R;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(o.a,null,r.a.createElement(f,null,r.a.createElement(W,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[155,1,2]]]);
//# sourceMappingURL=main.d623a68a.chunk.js.map